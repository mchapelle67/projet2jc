<!-- Menu Burger (visible uniquement mobile) -->
<div class="burger-menu">
    <button class="burger-toggle" id="burger-toggle" aria-label="Menu">
        <span class="burger-line"></span>
        <span class="burger-line"></span>
        <span class="burger-line"></span>
    </button>
</div>

<!-- Menu mobile (cach√© par d√©faut) -->
<nav class="mobile-nav" id="mobile-nav">
    <div class="mobile-nav-overlay"></div>
    <div class="mobile-nav-content">
        <div class="burger-menu-close">
            <button class="burger-toggle" id="burger-close" aria-label="Fermer">
                <span class="burger-line"></span>
                <span class="burger-line"></span>
                <span class="burger-line"></span>
            </button>
        </div>
        
        <ul class="mobile-nav-links">
            {% if is_granted('ROLE_USER')%}
            <li class="nav-item dropdown ms-auto">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLinkAdmin" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa-solid fa-user fa-lg" style="opacity: 1;"></i>          
                </a>
                <div class="dropdown-menu dropdown-menu-start" aria-labelledby="navbarDropdownMenuLinkAdmin">
                    {% if is_granted('ROLE_SUPER_ADMIN') %}
                    <a class="dropdown-item" href="{{ path('dashboard_admin') }}">SUPER ADMIN</a>
                    {% endif %}
                            <a class="dropdown-item" href="{{ path('app_admin_rdv_calendar') }}">Calendrier rdv</a>
                    {% if is_granted('ROLE_ADMIN')%}
                            <a class="dropdown-item" href="{{ path('app_admin_rdv') }}">Rdv en attente</a>
                            <a class="dropdown-item" href="{{ path('app_admin_devis') }}">Devis en attente</a>
                            <a class="dropdown-item" href="{{ path('app_rdv_historique') }}">Rdv historique</a>
                            <a class="dropdown-item" href="{{ path('app_devis_historique') }}">Devis historique</a>
                    <a class="dropdown-item" href="{{ path('add_vo') }}">Ajouter VO</a>
                    {% endif %}
                    <a class="dropdown-item" href="{{ path('app_logout') }}">Deconnexion</a>
                </div>
            </li>
            {% endif %}
            <li><a href="{{ path('app_home') }}"><i class="fa-solid fa-house"></i>Accueil</a></li>
            <li><a href="{{ path('app_services') }}"><i class="fa-solid fa-wrench"></i>Nos services</a></li>
            <li><a href="{{ path('app_devis_client') }}"><i class="fa-solid fa-file"></i>Devis</a></li>
            <li><a href="{{ path('app_rdv_client') }}"><i class="fa-solid fa-calendar-days"></i>Rendez-vous</a></li>
            <li><a href="{{ path('app_vo') }}"><i class="fa-solid fa-car"></i>Voitures d'occasions</a></li>
            <li><a href="{{ path('app_contact') }}"><i class="fa-solid fa-at"></i>Contact</a></li>
            <li><a href="{{ path('app_home')}}#localisation"><i class="fa-solid fa-location-dot"></i>Nous trouver</a></li>
            <li><a href="tel:0389400000"><i class="fa-solid fa-phone"></i> +33 3 89 40 00 00</a></li>
            <li class="social-links-container">
                <a href="https://www.facebook.com/p/2jc-Automobiles-100063767071947/?locale=fr_FR" aria-label="Facebook" class="social-link">
                    <i class="fa-brands fa-facebook fa-xl"></i>
                </a>
                <a href="https://www.instagram.com/2jc_automobiles/" aria-label="Instagram" class="social-link">
                    <i class="fa-brands fa-instagram fa-xl"></i>
                </a>
            </li>
        </ul>
    </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('üî• Script charg√©');
    
    const burgerToggle = document.getElementById('burger-toggle');
    const burgerClose = document.getElementById('burger-close'); // ‚Üê IMPORTANT
    const mobileNav = document.getElementById('mobile-nav');
    const overlay = document.querySelector('.mobile-nav-overlay');
    
    console.log('√âl√©ments trouv√©s:', {
        burgerToggle: !!burgerToggle,
        burgerClose: !!burgerClose, // ‚Üê V√âRIFIE √ßa
        mobileNav: !!mobileNav
    });
    
    // Ouvrir
    if (burgerToggle) {
        burgerToggle.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('üü¢ OUVERTURE');
            mobileNav.classList.add('open');
            burgerToggle.classList.add('active');
            document.body.style.overflow = 'hidden';
        });
    }
    
    // Fermer avec la croix
    if (burgerClose) {
        burgerClose.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('üî¥ FERMETURE CROIX');
            closeMenu();
        });
    } else {
        console.error('‚ùå Bouton fermer NON TROUV√â !');
    }
    
    // Fermer avec overlay
    if (overlay) {
        overlay.addEventListener('click', function(e) {
            console.log('üî¥ FERMETURE OVERLAY');
            closeMenu();
        });
    }
    
    function closeMenu() {
        if (mobileNav) mobileNav.classList.remove('open');
        if (burgerToggle) burgerToggle.classList.remove('active');
        document.body.style.overflow = '';
    }
});
</script>